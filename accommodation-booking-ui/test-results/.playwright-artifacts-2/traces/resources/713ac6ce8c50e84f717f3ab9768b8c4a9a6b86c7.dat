import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/guest/GuestAccountPage.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=be4f383c"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=be4f383c"; const useContext = __vite__cjsImport1_react["useContext"];
import { useNavigate } from "/node_modules/.vite/deps/react-router-dom.js?v=be4f383c";
import { Box, Stack } from "/node_modules/.vite/deps/@mui_material.js?v=be4f383c";
import { toast } from "/node_modules/.vite/deps/react-toastify.js?v=be4f383c";
import { ContactInfoForm, EmailForm, PasswordChangeForm } from "/src/components/shared/index.js";
import AuthContext from "/src/context/AuthProvider.jsx";
import { useAuthApi, useUsersApi } from "/src/hooks/index.js";
const GuestAccountPage = () => {
  _s();
  const navigate = useNavigate();
  const { auth, userData, updateUserData, logout } = useContext(AuthContext);
  const { updateEmail, updatePassword } = useAuthApi();
  const { updatePersonalDetails } = useUsersApi();
  const handleSaveContactInfo = async (data) => {
    const result = await updatePersonalDetails(
      auth.id,
      {
        firstName: data.firstName,
        lastName: data.lastName,
        phone: data.phone
      },
      auth.token
    );
    if (result.success) {
      updateUserData({
        firstName: data.firstName,
        lastName: data.lastName,
        phone: data.phone
      });
      toast.success("Dane kontaktowe zaktualizowane pomy�lnie");
    } else {
      toast.error(result.error || "B��d aktualizacji danych kontaktowych");
    }
  };
  const handleSaveEmail = async (data) => {
    const result = await updateEmail(auth.id, data.email, auth.token);
    if (result.success) {
      toast.success("Email zaktualizowany pomy�lnie - wylogowywanie...");
      logout();
      navigate("/login");
    } else {
      toast.error(result.error || "B��d aktualizacji email");
    }
  };
  const handleChangePassword = async (data) => {
    const result = await updatePassword(
      auth.id,
      { password: data.currentPassword, newPassword: data.newPassword },
      auth.token
    );
    if (result.success) {
      toast.success("Has�o zmienione pomy�lnie - wylogowywanie...");
      logout();
      navigate("/login");
    } else {
      toast.error(result.error || "B��d zmiany has�a");
    }
  };
  return /* @__PURE__ */ jsxDEV(Box, { sx: { display: "flex", flexDirection: "column", alignItems: "center" }, children: /* @__PURE__ */ jsxDEV(Stack, { spacing: 3, sx: { maxWidth: "800px", width: "100%" }, children: [
    /* @__PURE__ */ jsxDEV(
      ContactInfoForm,
      {
        initialData: {
          firstName: userData?.firstName || "",
          lastName: userData?.lastName || "",
          phone: userData?.phone || ""
        },
        onSave: handleSaveContactInfo
      },
      void 0,
      false,
      {
        fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx",
        lineNumber: 66,
        columnNumber: 9
      },
      this
    ),
    /* @__PURE__ */ jsxDEV(EmailForm, { initialEmail: userData?.email || "", onSave: handleSaveEmail }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx",
      lineNumber: 75,
      columnNumber: 9
    }, this),
    /* @__PURE__ */ jsxDEV(PasswordChangeForm, { onSave: handleChangePassword }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx",
      lineNumber: 77,
      columnNumber: 9
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx",
    lineNumber: 65,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx",
    lineNumber: 64,
    columnNumber: 5
  }, this);
};
_s(GuestAccountPage, "kLTUEM6PEnvckWild3WNbnNQ2B0=", false, function() {
  return [useNavigate, useAuthApi, useUsersApi];
});
_c = GuestAccountPage;
export default GuestAccountPage;
var _c;
$RefreshReg$(_c, "GuestAccountPage");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestAccountPage.jsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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QUFRRSx3QkFBNUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUFpRDtBQUFBLE9BWm5EO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FhQSxLQWRGO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FlQTtBQUVKO0FBQUVyQixHQXhFSUQsa0JBQWdCO0FBQUEsVUFDSFYsYUFFdUJRLFlBQ05DLFdBQVc7QUFBQTtBQUFBZ0MsS0FKekMvQjtBQTBFTixlQUFlQTtBQUFpQixJQUFBK0I7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbInVzZUNvbnRleHQiLCJ1c2VOYXZpZ2F0ZSIsIkJveCIsIlN0YWNrIiwidG9hc3QiLCJDb250YWN0SW5mb0Zvcm0iLCJFbWFpbEZvcm0iLCJQYXNzd29yZENoYW5nZUZvcm0iLCJBdXRoQ29udGV4dCIsInVzZUF1dGhBcGkiLCJ1c2VVc2Vyc0FwaSIsIkd1ZXN0QWNjb3VudFBhZ2UiLCJfcyIsIm5hdmlnYXRlIiwiYXV0aCIsInVzZXJEYXRhIiwidXBkYXRlVXNlckRhdGEiLCJsb2dvdXQiLCJ1cGRhdGVFbWFpbCIsInVwZGF0ZVBhc3N3b3JkIiwidXBkYXRlUGVyc29uYWxEZXRhaWxzIiwiaGFuZGxlU2F2ZUNvbnRhY3RJbmZvIiwiZGF0YSIsInJlc3VsdCIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJwaG9uZSIsInRva2VuIiwic3VjY2VzcyIsImVycm9yIiwiaGFuZGxlU2F2ZUVtYWlsIiwiZW1haWwiLCJoYW5kbGVDaGFuZ2VQYXNzd29yZCIsInBhc3N3b3JkIiwiY3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJkaXNwbGF5IiwiZmxleERpcmVjdGlvbiIsImFsaWduSXRlbXMiLCJtYXhXaWR0aCIsIndpZHRoIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiR3Vlc3RBY2NvdW50UGFnZS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgQm94LCBTdGFjayB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcclxuaW1wb3J0IHsgQ29udGFjdEluZm9Gb3JtLCBFbWFpbEZvcm0sIFBhc3N3b3JkQ2hhbmdlRm9ybSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvc2hhcmVkJztcclxuaW1wb3J0IEF1dGhDb250ZXh0IGZyb20gJy4uLy4uL2NvbnRleHQvQXV0aFByb3ZpZGVyJztcclxuaW1wb3J0IHsgdXNlQXV0aEFwaSwgdXNlVXNlcnNBcGkgfSBmcm9tICcuLi8uLi9ob29rcyc7XHJcblxyXG5jb25zdCBHdWVzdEFjY291bnRQYWdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTtcclxuICBjb25zdCB7IGF1dGgsIHVzZXJEYXRhLCB1cGRhdGVVc2VyRGF0YSwgbG9nb3V0IH0gPSB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcclxuICBjb25zdCB7IHVwZGF0ZUVtYWlsLCB1cGRhdGVQYXNzd29yZCB9ID0gdXNlQXV0aEFwaSgpO1xyXG4gIGNvbnN0IHsgdXBkYXRlUGVyc29uYWxEZXRhaWxzIH0gPSB1c2VVc2Vyc0FwaSgpO1xyXG5cclxuICBjb25zdCBoYW5kbGVTYXZlQ29udGFjdEluZm8gPSBhc3luYyAoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlUGVyc29uYWxEZXRhaWxzKFxyXG4gICAgICBhdXRoLmlkLFxyXG4gICAgICB7XHJcbiAgICAgICAgZmlyc3ROYW1lOiBkYXRhLmZpcnN0TmFtZSxcclxuICAgICAgICBsYXN0TmFtZTogZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZSxcclxuICAgICAgfSxcclxuICAgICAgYXV0aC50b2tlblxyXG4gICAgKTtcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICB1cGRhdGVVc2VyRGF0YSh7XHJcbiAgICAgICAgZmlyc3ROYW1lOiBkYXRhLmZpcnN0TmFtZSxcclxuICAgICAgICBsYXN0TmFtZTogZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZSxcclxuICAgICAgfSk7XHJcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoJ0RhbmUga29udGFrdG93ZSB6YWt0dWFsaXpvd2FuZSBwb21577+9bG5pZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdG9hc3QuZXJyb3IocmVzdWx0LmVycm9yIHx8ICdC77+977+9ZCBha3R1YWxpemFjamkgZGFueWNoIGtvbnRha3Rvd3ljaCcpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNhdmVFbWFpbCA9IGFzeW5jIChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVFbWFpbChhdXRoLmlkLCBkYXRhLmVtYWlsLCBhdXRoLnRva2VuKTtcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICB0b2FzdC5zdWNjZXNzKCdFbWFpbCB6YWt0dWFsaXpvd2FueSBwb21577+9bG5pZSAtIHd5bG9nb3d5d2FuaWUuLi4nKTtcclxuICAgICAgbG9nb3V0KCk7XHJcbiAgICAgIG5hdmlnYXRlKCcvbG9naW4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRvYXN0LmVycm9yKHJlc3VsdC5lcnJvciB8fCAnQu+/ve+/vWQgYWt0dWFsaXphY2ppIGVtYWlsJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlUGFzc3dvcmQgPSBhc3luYyAoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlUGFzc3dvcmQoXHJcbiAgICAgIGF1dGguaWQsXHJcbiAgICAgIHsgcGFzc3dvcmQ6IGRhdGEuY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZDogZGF0YS5uZXdQYXNzd29yZCB9LFxyXG4gICAgICBhdXRoLnRva2VuXHJcbiAgICApO1xyXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoJ0hhc++/vW8gem1pZW5pb25lIHBvbXnvv71sbmllIC0gd3lsb2dvd3l3YW5pZS4uLicpO1xyXG4gICAgICBsb2dvdXQoKTtcclxuICAgICAgbmF2aWdhdGUoJy9sb2dpbicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdG9hc3QuZXJyb3IocmVzdWx0LmVycm9yIHx8ICdC77+977+9ZCB6bWlhbnkgaGFz77+9YScpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8Qm94IHN4PXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19PlxyXG4gICAgICA8U3RhY2sgc3BhY2luZz17M30gc3g9e3sgbWF4V2lkdGg6ICc4MDBweCcsIHdpZHRoOiAnMTAwJScgfX0+XHJcbiAgICAgICAgPENvbnRhY3RJbmZvRm9ybVxyXG4gICAgICAgICAgaW5pdGlhbERhdGE9e3tcclxuICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyRGF0YT8uZmlyc3ROYW1lIHx8ICcnLFxyXG4gICAgICAgICAgICBsYXN0TmFtZTogdXNlckRhdGE/Lmxhc3ROYW1lIHx8ICcnLFxyXG4gICAgICAgICAgICBwaG9uZTogdXNlckRhdGE/LnBob25lIHx8ICcnLFxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uU2F2ZT17aGFuZGxlU2F2ZUNvbnRhY3RJbmZvfVxyXG4gICAgICAgIC8+XHJcblxyXG4gICAgICAgIDxFbWFpbEZvcm0gaW5pdGlhbEVtYWlsPXt1c2VyRGF0YT8uZW1haWwgfHwgJyd9IG9uU2F2ZT17aGFuZGxlU2F2ZUVtYWlsfSAvPlxyXG5cclxuICAgICAgICA8UGFzc3dvcmRDaGFuZ2VGb3JtIG9uU2F2ZT17aGFuZGxlQ2hhbmdlUGFzc3dvcmR9IC8+XHJcbiAgICAgIDwvU3RhY2s+XHJcbiAgICA8L0JveD5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgR3Vlc3RBY2NvdW50UGFnZTsiXSwiZmlsZSI6IkM6L1VzZXJzL3dpa3RvL3NvdXJjZS9yZXBvcy9SQksxNC9hY2NvbW1vZGF0aW9uLWJvb2tpbmctYXBwL2FjY29tbW9kYXRpb24tYm9va2luZy11aS9zcmMvcGFnZXMvZ3Vlc3QvR3Vlc3RBY2NvdW50UGFnZS5qc3gifQ==