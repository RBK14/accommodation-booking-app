import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/guest/GuestListingPage.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=be4f383c"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=be4f383c"; const useState = __vite__cjsImport1_react["useState"]; const useEffect = __vite__cjsImport1_react["useEffect"];
import { useNavigate, useParams } from "/node_modules/.vite/deps/react-router-dom.js?v=be4f383c";
import { Box, Container, Card, CardContent, Button, CircularProgress, Alert } from "/node_modules/.vite/deps/@mui_material.js?v=be4f383c";
import CalendarMonthIcon from "/node_modules/.vite/deps/@mui_icons-material_CalendarMonth.js?v=be4f383c";
import { ListingDetailsSection, ListingGallerySection } from "/src/components/shared/index.js";
import { ReviewsSection } from "/src/components/host/index.js";
import { useListingsApi, useReviewsApi } from "/src/hooks/index.js";
import { useAuth } from "/src/hooks/index.js";
import { PRIMARY_BLUE } from "/src/assets/styles/colors.js";
const GuestListingPage = () => {
  _s();
  const navigate = useNavigate();
  const { id } = useParams();
  const { auth } = useAuth();
  const { getListing, loading: listingLoading, error: listingError } = useListingsApi();
  const { getReviews, loading: reviewsLoading } = useReviewsApi();
  const [listing, setListing] = useState(null);
  const [images, setImages] = useState([]);
  const [reviews, setReviews] = useState([]);
  useEffect(() => {
    const fetchData = async () => {
      if (!auth?.token || !id) return;
      const listingResult = await getListing(id, auth.token);
      if (listingResult.success) {
        setListing(listingResult.data);
        if (listingResult.data.photos && listingResult.data.photos.length > 0) {
          setImages(listingResult.data.photos);
        }
      }
      const reviewsResult = await getReviews({ listingId: id }, auth.token);
      if (reviewsResult.success) {
        setReviews(reviewsResult.data);
      }
    };
    fetchData();
  }, [id, auth?.token]);
  const handleReservation = () => {
    navigate(`/reservation/${id}`);
  };
  if (listingLoading || reviewsLoading) {
    return /* @__PURE__ */ jsxDEV(Container, { maxWidth: "lg", sx: { py: 4 }, children: /* @__PURE__ */ jsxDEV(Box, { sx: { display: "flex", justifyContent: "center", alignItems: "center", py: 8 }, children: /* @__PURE__ */ jsxDEV(CircularProgress, {}, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 52,
      columnNumber: 21
    }, this) }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 51,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 50,
      columnNumber: 7
    }, this);
  }
  if (listingError) {
    return /* @__PURE__ */ jsxDEV(Container, { maxWidth: "lg", sx: { py: 4 }, children: /* @__PURE__ */ jsxDEV(Alert, { severity: "error", sx: { mb: 3 }, children: listingError }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 61,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 60,
      columnNumber: 7
    }, this);
  }
  if (!listing) {
    return /* @__PURE__ */ jsxDEV(Container, { maxWidth: "lg", sx: { py: 4 }, children: /* @__PURE__ */ jsxDEV(Alert, { severity: "info", sx: { mb: 3 }, children: "Nie znaleziono ogłoszenia" }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 71,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 70,
      columnNumber: 7
    }, this);
  }
  return /* @__PURE__ */ jsxDEV(Container, { maxWidth: "lg", sx: { py: 4 }, children: [
    /* @__PURE__ */ jsxDEV(Card, { sx: { mb: 3 }, children: /* @__PURE__ */ jsxDEV(CardContent, { children: [
      /* @__PURE__ */ jsxDEV(Box, { sx: { display: "flex", gap: 3, flexDirection: { xs: "column", md: "row" } }, children: [
        /* @__PURE__ */ jsxDEV(ListingDetailsSection, { listing, onEdit: null, onDelete: null }, void 0, false, {
          fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
          lineNumber: 83,
          columnNumber: 25
        }, this),
        /* @__PURE__ */ jsxDEV(ListingGallerySection, { images }, void 0, false, {
          fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
          lineNumber: 84,
          columnNumber: 25
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
        lineNumber: 82,
        columnNumber: 21
      }, this),
      /* @__PURE__ */ jsxDEV(Box, { sx: { mt: 3, display: "flex", justifyContent: "center" }, children: /* @__PURE__ */ jsxDEV(
        Button,
        {
          variant: "contained",
          size: "large",
          startIcon: /* @__PURE__ */ jsxDEV(CalendarMonthIcon, {}, void 0, false, {
            fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
            lineNumber: 92,
            columnNumber: 26
          }, this),
          sx: {
            backgroundColor: PRIMARY_BLUE,
            px: 6,
            py: 1.5,
            fontSize: "1.1rem",
            "&:hover": {
              backgroundColor: "#0a58ca"
            }
          },
          onClick: handleReservation,
          children: "Zarezerwuj termin"
        },
        void 0,
        false,
        {
          fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
          lineNumber: 89,
          columnNumber: 25
        },
        this
      ) }, void 0, false, {
        fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
        lineNumber: 88,
        columnNumber: 21
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 81,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
      lineNumber: 80,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV(
      ReviewsSection,
      {
        reviews,
        title: "Opinie gości",
        showListingTitle: false,
        allowEdit: false
      },
      void 0,
      false,
      {
        fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
        lineNumber: 111,
        columnNumber: 13
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx",
    lineNumber: 79,
    columnNumber: 5
  }, this);
};
_s(GuestListingPage, "Y/Y4v6tHm9hnyKu5jrKjWEsA8Z8=", false, function() {
  return [useNavigate, useParams, useAuth, useListingsApi, useReviewsApi];
});
_c = GuestListingPage;
export default GuestListingPage;
var _c;
$RefreshReg$(_c, "GuestListingPage");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "C:/Users/wikto/source/repos/RBK14/accommodation-booking-app/accommodation-booking-ui/src/pages/guest/GuestListingPage.jsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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QUFBQSxXQTRCQTtBQUFBLElBR0E7QUFBQSxNQUFDO0FBQUE7QUFBQSxRQUNHO0FBQUEsUUFDQSxPQUFNO0FBQUEsUUFDTixrQkFBa0I7QUFBQSxRQUNsQixXQUFXO0FBQUE7QUFBQSxNQUpmO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUl1QjtBQUFBLE9BcEMzQjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBc0NBO0FBRVI7QUFBRTFCLEdBNUdJRCxrQkFBZ0I7QUFBQSxVQUNEakIsYUFDRkMsV0FDRWMsU0FDb0RGLGdCQUNyQkMsYUFBYTtBQUFBO0FBQUE0QyxLQUwzRHpDO0FBOEdOLGVBQWVBO0FBQWlCLElBQUF5QztBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VOYXZpZ2F0ZSIsInVzZVBhcmFtcyIsIkJveCIsIkNvbnRhaW5lciIsIkNhcmQiLCJDYXJkQ29udGVudCIsIkJ1dHRvbiIsIkNpcmN1bGFyUHJvZ3Jlc3MiLCJBbGVydCIsIkNhbGVuZGFyTW9udGhJY29uIiwiTGlzdGluZ0RldGFpbHNTZWN0aW9uIiwiTGlzdGluZ0dhbGxlcnlTZWN0aW9uIiwiUmV2aWV3c1NlY3Rpb24iLCJ1c2VMaXN0aW5nc0FwaSIsInVzZVJldmlld3NBcGkiLCJ1c2VBdXRoIiwiUFJJTUFSWV9CTFVFIiwiR3Vlc3RMaXN0aW5nUGFnZSIsIl9zIiwibmF2aWdhdGUiLCJpZCIsImF1dGgiLCJnZXRMaXN0aW5nIiwibG9hZGluZyIsImxpc3RpbmdMb2FkaW5nIiwiZXJyb3IiLCJsaXN0aW5nRXJyb3IiLCJnZXRSZXZpZXdzIiwicmV2aWV3c0xvYWRpbmciLCJsaXN0aW5nIiwic2V0TGlzdGluZyIsImltYWdlcyIsInNldEltYWdlcyIsInJldmlld3MiLCJzZXRSZXZpZXdzIiwiZmV0Y2hEYXRhIiwidG9rZW4iLCJsaXN0aW5nUmVzdWx0Iiwic3VjY2VzcyIsImRhdGEiLCJwaG90b3MiLCJsZW5ndGgiLCJyZXZpZXdzUmVzdWx0IiwibGlzdGluZ0lkIiwiaGFuZGxlUmVzZXJ2YXRpb24iLCJweSIsImRpc3BsYXkiLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJtYiIsImdhcCIsImZsZXhEaXJlY3Rpb24iLCJ4cyIsIm1kIiwibXQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJweCIsImZvbnRTaXplIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiR3Vlc3RMaXN0aW5nUGFnZS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZU5hdmlnYXRlLCB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IEJveCwgQ29udGFpbmVyLCBDYXJkLCBDYXJkQ29udGVudCwgQnV0dG9uLCBDaXJjdWxhclByb2dyZXNzLCBBbGVydCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xuaW1wb3J0IENhbGVuZGFyTW9udGhJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQ2FsZW5kYXJNb250aCc7XG5pbXBvcnQgeyBMaXN0aW5nRGV0YWlsc1NlY3Rpb24sIExpc3RpbmdHYWxsZXJ5U2VjdGlvbiB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvc2hhcmVkJztcbmltcG9ydCB7IFJldmlld3NTZWN0aW9uIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9ob3N0JztcbmltcG9ydCB7IHVzZUxpc3RpbmdzQXBpLCB1c2VSZXZpZXdzQXBpIH0gZnJvbSAnLi4vLi4vaG9va3MnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4uLy4uL2hvb2tzJztcbmltcG9ydCB7IFBSSU1BUllfQkxVRSB9IGZyb20gJy4uLy4uL2Fzc2V0cy9zdHlsZXMvY29sb3JzJztcblxuY29uc3QgR3Vlc3RMaXN0aW5nUGFnZSA9ICgpID0+IHtcbiAgICBjb25zdCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7XG4gICAgY29uc3QgeyBpZCB9ID0gdXNlUGFyYW1zKCk7XG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VBdXRoKCk7XG4gICAgY29uc3QgeyBnZXRMaXN0aW5nLCBsb2FkaW5nOiBsaXN0aW5nTG9hZGluZywgZXJyb3I6IGxpc3RpbmdFcnJvciB9ID0gdXNlTGlzdGluZ3NBcGkoKTtcbiAgICBjb25zdCB7IGdldFJldmlld3MsIGxvYWRpbmc6IHJldmlld3NMb2FkaW5nIH0gPSB1c2VSZXZpZXdzQXBpKCk7XG4gICAgY29uc3QgW2xpc3RpbmcsIHNldExpc3RpbmddID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2ltYWdlcywgc2V0SW1hZ2VzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCBbcmV2aWV3cywgc2V0UmV2aWV3c10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWF1dGg/LnRva2VuIHx8ICFpZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBQb2JpZXJ6IGRhbmUgb2fFgm9zemVuaWFcbiAgICAgICAgICAgIGNvbnN0IGxpc3RpbmdSZXN1bHQgPSBhd2FpdCBnZXRMaXN0aW5nKGlkLCBhdXRoLnRva2VuKTtcbiAgICAgICAgICAgIGlmIChsaXN0aW5nUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBzZXRMaXN0aW5nKGxpc3RpbmdSZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RpbmdSZXN1bHQuZGF0YS5waG90b3MgJiYgbGlzdGluZ1Jlc3VsdC5kYXRhLnBob3Rvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEltYWdlcyhsaXN0aW5nUmVzdWx0LmRhdGEucGhvdG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFBvYmllcnogb3BpbmllIGRsYSB0ZWdvIG9nxYJvc3plbmlhXG4gICAgICAgICAgICBjb25zdCByZXZpZXdzUmVzdWx0ID0gYXdhaXQgZ2V0UmV2aWV3cyh7IGxpc3RpbmdJZDogaWQgfSwgYXV0aC50b2tlbik7XG4gICAgICAgICAgICBpZiAocmV2aWV3c1Jlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgc2V0UmV2aWV3cyhyZXZpZXdzUmVzdWx0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZldGNoRGF0YSgpO1xuICAgIH0sIFtpZCwgYXV0aD8udG9rZW5dKTtcblxuICAgIGNvbnN0IGhhbmRsZVJlc2VydmF0aW9uID0gKCkgPT4ge1xuICAgICAgICBuYXZpZ2F0ZShgL3Jlc2VydmF0aW9uLyR7aWR9YCk7XG4gICAgfTtcblxuICAgIGlmIChsaXN0aW5nTG9hZGluZyB8fCByZXZpZXdzTG9hZGluZykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPENvbnRhaW5lciBtYXhXaWR0aD1cImxnXCIgc3g9e3sgcHk6IDQgfX0+XG4gICAgICAgICAgICAgICAgPEJveCBzeD17eyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgYWxpZ25JdGVtczogJ2NlbnRlcicsIHB5OiA4IH19PlxuICAgICAgICAgICAgICAgICAgICA8Q2lyY3VsYXJQcm9ncmVzcyAvPlxuICAgICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPC9Db250YWluZXI+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGxpc3RpbmdFcnJvcikge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPENvbnRhaW5lciBtYXhXaWR0aD1cImxnXCIgc3g9e3sgcHk6IDQgfX0+XG4gICAgICAgICAgICAgICAgPEFsZXJ0IHNldmVyaXR5PVwiZXJyb3JcIiBzeD17eyBtYjogMyB9fT5cbiAgICAgICAgICAgICAgICAgICAge2xpc3RpbmdFcnJvcn1cbiAgICAgICAgICAgICAgICA8L0FsZXJ0PlxuICAgICAgICAgICAgPC9Db250YWluZXI+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFsaXN0aW5nKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Q29udGFpbmVyIG1heFdpZHRoPVwibGdcIiBzeD17eyBweTogNCB9fT5cbiAgICAgICAgICAgICAgICA8QWxlcnQgc2V2ZXJpdHk9XCJpbmZvXCIgc3g9e3sgbWI6IDMgfX0+XG4gICAgICAgICAgICAgICAgICAgIE5pZSB6bmFsZXppb25vIG9nxYJvc3plbmlhXG4gICAgICAgICAgICAgICAgPC9BbGVydD5cbiAgICAgICAgICAgIDwvQ29udGFpbmVyPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxDb250YWluZXIgbWF4V2lkdGg9XCJsZ1wiIHN4PXt7IHB5OiA0IH19PlxuICAgICAgICAgICAgPENhcmQgc3g9e3sgbWI6IDMgfX0+XG4gICAgICAgICAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICA8Qm94IHN4PXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAzLCBmbGV4RGlyZWN0aW9uOiB7IHhzOiAnY29sdW1uJywgbWQ6ICdyb3cnIH0gfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlzdGluZ0RldGFpbHNTZWN0aW9uIGxpc3Rpbmc9e2xpc3Rpbmd9IG9uRWRpdD17bnVsbH0gb25EZWxldGU9e251bGx9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlzdGluZ0dhbGxlcnlTZWN0aW9uIGltYWdlcz17aW1hZ2VzfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L0JveD5cblxuICAgICAgICAgICAgICAgICAgICB7LyogUHJ6eWNpc2sgcmV6ZXJ3YWNqaSAqL31cbiAgICAgICAgICAgICAgICAgICAgPEJveCBzeD17eyBtdDogMywgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImNvbnRhaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEljb249ezxDYWxlbmRhck1vbnRoSWNvbiAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBSSU1BUllfQkxVRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHg6IDYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5OiAxLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMS4xcmVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyY6aG92ZXInOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMGE1OGNhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlc2VydmF0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFphcmV6ZXJ3dWogdGVybWluXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cblxuICAgICAgICAgICAgey8qIFNla2NqYSBvcGluaWkgKi99XG4gICAgICAgICAgICA8UmV2aWV3c1NlY3Rpb25cbiAgICAgICAgICAgICAgICByZXZpZXdzPXtyZXZpZXdzfVxuICAgICAgICAgICAgICAgIHRpdGxlPVwiT3BpbmllIGdvxZtjaVwiXG4gICAgICAgICAgICAgICAgc2hvd0xpc3RpbmdUaXRsZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgYWxsb3dFZGl0PXtmYWxzZX0gIC8vIEdvxZvEhyBuaWUgbW/FvGUgZWR5dG93YcSHIG9waW5paSBpbm55Y2ggdcW8eXRrb3duaWvDs3dcbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvQ29udGFpbmVyPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHdWVzdExpc3RpbmdQYWdlOyJdLCJmaWxlIjoiQzovVXNlcnMvd2lrdG8vc291cmNlL3JlcG9zL1JCSzE0L2FjY29tbW9kYXRpb24tYm9va2luZy1hcHAvYWNjb21tb2RhdGlvbi1ib29raW5nLXVpL3NyYy9wYWdlcy9ndWVzdC9HdWVzdExpc3RpbmdQYWdlLmpzeCJ9